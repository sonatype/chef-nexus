#
# Copyright:: Copyright (c) 2017-present Sonatype, Inc. Apache License, Version 2.0.
#

[general]
state_file= <%= node['awslogs']['data'] %>/agent-state
use_gzip_http_content_encoding = true

[cloud-init.log]
file = /var/log/cloud-init.log
log_group_name = <%= node['nexus_repository_manager']['aws']['log_group'] %>
log_stream_name = {instance_id}/cloud-init.log
datetime_format = %Y-%m-%d %H:%M:%S,%f
multi_line_start_pattern = {datetime_format}

[cloud-init-output.log]
file = /var/log/cloud-init-output.log
log_group_name = <%= node['nexus_repository_manager']['aws']['log_group'] %>
log_stream_name = {instance_id}/cloud-init-output.log
datetime_format = %Y-%m-%d %H:%M:%S,%f
multi_line_start_pattern = {datetime_format}

[nexus.log]
file = /opt/sonatype-work/nexus3/log/nexus.log
log_group_name = <%= node['nexus_repository_manager']['aws']['log_group'] %>
log_stream_name = {instance_id}/nexus.log
datetime_format = %Y-%m-%d %H:%M:%S,%f%z
multi_line_start_pattern = {datetime_format}

[karaf.log]
file = /opt/sonatype-work/nexus3/log/karaf.log
log_group_name = <%= node['nexus_repository_manager']['aws']['log_group'] %>
log_stream_name = {instance_id}/karaf.log
datetime_format = %b %d, %Y %I:%M:%S %p
multi_line_start_pattern = {datetime_format}